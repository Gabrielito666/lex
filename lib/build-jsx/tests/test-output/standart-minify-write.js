(()=>{var b=Object.defineProperty;var v=(t,e)=>{for(var s in e)b(t,s,{get:e[s],enumerable:!0})};var p={};v(p,{Fragment:()=>x,State:()=>c,createElement:()=>y,default:()=>w,mount:()=>g,startClient:()=>u,useClient:()=>C,useRef:()=>h,useState:()=>d});var c=class{constructor(e){this._value=e,this.onChangesStack=[]}get(){return this._value}set(e){this._value=e,this.onChangesStack.forEach(s=>s(e))}valueOf(){return this._value}toString(){return String(this._value)}appendOnChange(e){typeof e=="function"&&this.onChangesStack.push(e)}},d=t=>{let e=new c(t);return[e,s=>{e.set(s)}]},h=t=>({current:t}),m=t=>{let e=[];return t.forEach(s=>{Array.isArray(s)?e.push(...m(s)):e.push(s)}),e},i={counter:0,clientStack:[],selectMode:!0},y=(t,e={},...s)=>{if(e||(e={}),e.lexid=i.counter,typeof t=="string"){let r=i.selectMode?document.querySelector(`[lexid="${e.lexid}"]`):document.createElement(t);return Object.entries(e).forEach(([o,a])=>{let n={type:"attribute",key:o,value:a};o.startsWith("on")&&typeof a=="function"?(n.key=o.toLowerCase(),n.type="event"):o==="ref"&&a instanceof Object?e.ref.current=r:o==="className"?(n.key="class",n.type="attribute"):o==="htmlFor"?(n.key="for",n.type="attribute"):(n.key=o.toLowerCase(),n.type="attribute");let l=()=>{n.type==="attribute"?r.setAttribute(n.key,n.value):n.type==="event"&&(r[n.key]=n.value)};l(),a instanceof c&&a.appendOnChange(S=>{n.value=S,l()})}),m(s).forEach((o,a)=>{if(i.selectMode){if(o instanceof c){let n=r.childNodes[a];o.appendOnChange(l=>{n.nodeValue=l})}}else if(o instanceof window.Node)r.appendChild(o);else{let n=document.createTextNode(String(o));r.appendChild(n),o instanceof c&&o.appendOnChange(l=>{n.nodeValue=l})}}),i.counter++,r}else if(typeof t=="function"){let r=t({...e,children:s});if(r instanceof Promise)throw new Error("Lex.createElement doesn't support async components");return r}},x=({children:t})=>t,C=t=>{if(typeof t=="function")i.clientStack.push(t);else throw new Error("useClient only accepts functions")},u=()=>{i.selectMode&&(i.selectMode=!1,i.clientStack.forEach(t=>t()),i.clientStack.length=0)},g=t=>{u()},E={createElement:y,State:c,useState:d,useRef:h,Fragment:x,useClient:C,startClient:u,mount:g},w=E;var f=p;var k=()=>f.createElement("html",null,f.createElement("body",null,f.createElement("div",null,"Hello, world!")));f.mount(f.createElement(k,null));})();
